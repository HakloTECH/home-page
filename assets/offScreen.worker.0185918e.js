var P=Object.defineProperty;var k=(c,i,r)=>i in c?P(c,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[i]=r;var g=(c,i,r)=>(k(c,typeof i!="symbol"?i+"":i,r),r);(function(){"use strict";const c="modulepreload",i={},r="./",w=function(t,n){return t()};class v{constructor(){g(this,"cache",{})}async loadPainter(t,n){if(t in this.cache)return this.cache[t];const{painters:e}=await w(()=>import(t),void 0);if(!e)return{success:!1};let s=!1,d,a;for(a in e){const u=n[a];if(u){d=()=>e[a].init(u),s=!0;break}}const f={success:s,ctxName:a,init:d};return this.cache[t]=f,f}}const y=new v;let l;const p={};let h,m=null;self.onmessage=async o=>{switch(o.data.type){case"init":{const{ctxNames:t}=o.data;l=o.data.canvases;for(let n=t.length;n--;)p[t[n]]=l[n].getContext(t[n]);break}case"load":{const{scriptURL:t}=o.data,{success:n,ctxName:e,init:s}=await y.loadPainter(t,p);if(!n||m===t)return 0;postMessage({type:"paintStart",ctxName:e}),await(h==null?void 0:h()),m=t,h=(await s()).dispose,postMessage({type:"paintEnd"});break}case"resize":{const{width:t,height:n}=o.data;for(let e=l.length;e--;){const s=l[e];!s||(s.width=t,s.height=n)}break}}}})();
